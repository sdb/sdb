{% extends "base.html" %}

{% load social_extras %}

{% block main_content %}
<div id="main">
  <div id="content_wrapper">
    <div id="content">
      {% if messages %}
      <div id="flash">
        {% for message in messages %}{{ message }}{% endfor %}
      </div>
      {% endif %}
      {% block social_content %}{% endblock %}
    </div>
  </div>
  <div id="sidebar_wrapper">
    <div id="sidebar">
      <h2 class="title"><a href="{% url social %}">{{ title }}</a></h2>
      <ul id="links">
        {% for link in social.links %}
          <li class="link"><a href="{{ link.url }}">{{ link.title }}</a></li>
        {% endfor %}
      </ul>
      <ul class="types">
        <li><a href="{% url social %}" title="Show all"><img src="/media/img/world.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'bookmark' %}" title="Show bookmarks only"><img src="/media/img/bookmark.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'photos' %}" title="Show photo updates only"><img src="/media/img/photography.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'collab' %}" title="Show collaboration events only"><img src="/media/img/collaboration.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'fav' %}" title="Show favs only"><img src="/media/img/heart.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'post' %}" title="Show blog posts only"><img src="/media/img/pen.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'status' %}" title="Show status updates only"><img src="/media/img/twitter.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'comment' %}" title="Show comments only"><img src="/media/img/comment.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'book' %}" title="Show books only"><img src="/media/img/library.png" width="16" height="16" /></a></li>
        <li><a href="{% url social 'program' %}" title="Show programs only"><img src="/media/img/process.png" width="16" height="16" /></a></li>
      </ul>
      <p class="box">
      {% if elapsed > 10 %}<a href="{% url update %}" title="Update all services at once">Feed</a> me, i'm hungry.
      {% else %}Don't <a href="{% url update %}" title="Update all services at once">feed</a> me, i'm {% if elapsed < 3 %}really{% endif %} not hungry.
      {% endif %}
      Last meal: {% if elapsed > 1 %}{{ elapsed }} minutes ago.{% else %}{% if elapsed > 0 %}{{ elapsed }} minute ago.{% else %} i'm still chewin'!{% endif %}{% endif %}
      </p>
      <p class="sidenote"><a id="show_feed_note" href="javascript:return false">How does this work?</a></p>
      <div id="feed_note" style="display:none;">
        <p>Clicking 'feed' starts a background job which checks all configured services to see if there's anything new.</p>
        <p>If a service wasn't checked for updates for a configured period of time, then a new update for that service will be scheduled. If not, the service is skipped for this round of update checking.</p>
        <p>Note that it can take a couple of minutes before all services are updated. For now, you'll also have to refresh the page yourself to see the updates.</p>
      </div>
      <p class="sidenote" style="margin-top: 50px;">Created with <a href="http://www.djangoproject.com/">Django</a>, check out the <a href="http://github.com/sdb/sdb">source code</a>.</p>
      <p class="sidenote">Thanks: <a href="http://www.python.org/">Python</a>, <a href="http://www.djangoproject.com/">Django</a>, <a href="http://pc.de/icons/#Dortmund">PC.DE Dortmund Icon Set</a>, <a href="http://github.com/">GitHub</a></p>
    </div>
  </div>
</div>

<script type="text/javascript">
$(document).ready(function(){
  $("a#show_feed_note").click(function(event){
    if ($('div#feed_note').is(':hidden')) 
      $('div#feed_note').fadeIn("slow");
    else
      $('div#feed_note').fadeOut("slow");
  });
{% if messages %}
  $('div#flash').click(function(event){
    $('div#flash').fadeOut("slow");
  });
{% endif %}
});
</script>

{% endblock %}


